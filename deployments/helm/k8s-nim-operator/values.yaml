operator:
  replicas: 1
  upgradeCRD: true
  image:
    repository: ghcr.io/nvidia/k8s-nim-operator
    tag: main
    pullSecrets: []
    pullPolicy: Always
  args:
    - --health-probe-bind-address=:8081
    - --metrics-bind-address=:8080
    - --leader-elect
  log:
    # Enable development mode
    development: false
    # Log verbosity level (debug | info | warn | error | dpanic | panic | fatal)
    level: info
    # Stacktrace generation level (debug | info | warn | error | dpanic | panic | fatal)
    stacktraceLevel: error
    # Log encoder format (json|console)
    encoder: json
  resources:
      limits:
        cpu: "1"
        memory: 256Mi
      requests:
        cpu: 500m
        memory: 128Mi
  nodeSelector: {}
  annotations: {}
  podAnnotations: {}
  tolerations:
  - key: "node-role.kubernetes.io/control-plane"
    operator: "Equal"
    value: ""
    effect: "NoSchedule"
  affinity:
    nodeAffinity:
      preferredDuringSchedulingIgnoredDuringExecution:
        - weight: 1
          preference:
            matchExpressions:
              - key: "node-role.kubernetes.io/control-plane"
                operator: In
                values: [""]
  podSecurityContext:
    seccompProfile:
      # Required for VMWare TKGS platform
      type: RuntimeDefault
    runAsNonRoot: true
  containerSecurityContext:
    allowPrivilegeEscalation: false
    capabilities:
      drop:
        - ALL
  admissionController:
    # Enable the admission controller. 
    # Note: cert-manager must be installed beforehand, as it is required to generate the TLS certificates.
    enabled: false

metricsService:
  ports:
  - name: metrics
    port: 8080
    protocol: TCP
  type: ClusterIP

nfd:
  nodeFeatureRules:
    deviceID: true
